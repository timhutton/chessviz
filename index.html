<html>
<body>

<!--    Copyright 2017 Tim Hutton <tim.hutton@gmail.com>

        This file is part of chessviz.

        chessviz is free software: you can redistribute it and/or modify
        it under the terms of the GNU General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        chessviz is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
        GNU General Public License for more details.

        You should have received a copy of the GNU General Public License
        along with chessviz. If not, see <http://www.gnu.org/licenses/>          -->

<canvas id="myCanvas" width="900" height="900" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>
// output from extract_moves.py
var moves = [[[[0, 11003, 4261, 3812, 2716, 1671, 1351, 1349], [5962, 3559, 706, 0, 0, 0, 0, 0], [3889, 728, 2109, 0, 0, 0, 0, 0], [4124, 0, 0, 2463, 0, 0, 0, 0], [4026, 0, 0, 0, 2448, 0, 0, 0], [3931, 0, 0, 0, 0, 1309, 0, 0], [3206, 0, 0, 0, 0, 0, 518, 0], [3142, 0, 0, 0, 0, 0, 0, 151]], [[19692, 0, 13363, 7617, 5695, 3417, 2488, 2559], [4966, 12790, 5620, 2963, 0, 0, 0, 0], [1173, 7775, 2635, 4971, 0, 0, 0, 0], [0, 5578, 0, 0, 4837, 0, 0, 0], [0, 4674, 0, 0, 0, 4085, 0, 0], [0, 4259, 0, 0, 0, 0, 1288, 0], [0, 3474, 0, 0, 0, 0, 0, 425], [0, 2914, 0, 0, 0, 0, 0, 0]], [[6414, 29992, 0, 9435, 5419, 2975, 2115, 2084], [775, 9784, 7738, 7939, 2200, 0, 0, 0], [3594, 2091, 6129, 2525, 6642, 0, 0, 0], [0, 0, 3320, 0, 0, 4370, 0, 0], [0, 0, 2753, 0, 0, 0, 3744, 0], [0, 0, 2330, 0, 0, 0, 0, 1829], [0, 0, 1925, 0, 0, 0, 0, 0], [0, 0, 1649, 0, 0, 0, 0, 0]], [[6375, 9968, 52743, 0, 7417, 3576, 2375, 2593], [0, 4577, 30541, 8696, 8719, 5552, 0, 0], [0, 5490, 7570, 6830, 7025, 8346, 0, 0], [3520, 0, 0, 4064, 0, 0, 5817, 0], [0, 0, 0, 3716, 0, 0, 0, 2907], [0, 0, 0, 2510, 0, 0, 0, 0], [0, 0, 0, 1627, 0, 0, 0, 0], [0, 0, 0, 1591, 0, 0, 0, 0]], [[5145, 11684, 8959, 132509, 0, 10093, 3350, 3954], [0, 0, 21100, 65149, 12175, 26178, 11549, 0], [0, 0, 10559, 34351, 17692, 30410, 34938, 0], [0, 12542, 0, 0, 8544, 0, 0, 19666], [3228, 0, 0, 0, 8953, 0, 0, 0], [0, 0, 0, 0, 4725, 0, 0, 0], [0, 0, 0, 0, 3376, 0, 0, 0], [0, 0, 0, 0, 5793, 0, 0, 0]], [[3022, 5366, 4157, 4544, 182526, 0, 5809, 5100], [0, 0, 0, 8923, 97757, 11425, 18776, 3019], [0, 0, 0, 12879, 10938, 7047, 10391, 9209], [0, 0, 9122, 0, 0, 4050, 0, 0], [0, 6121, 0, 0, 0, 3121, 0, 0], [4616, 0, 0, 0, 0, 2081, 0, 0], [0, 0, 0, 0, 0, 1429, 0, 0], [0, 0, 0, 0, 0, 745, 0, 0]], [[3086, 4365, 3494, 3479, 152603, 593604, 0, 9847], [0, 0, 0, 0, 3546, 33114, 12679, 9268], [0, 0, 0, 0, 5232, 3654, 11642, 2902], [0, 0, 0, 4935, 0, 0, 9486, 0], [0, 0, 5013, 0, 0, 0, 7066, 0], [0, 2346, 0, 0, 0, 0, 4026, 0], [654, 0, 0, 0, 0, 0, 2021, 0], [0, 0, 0, 0, 0, 0, 797, 0]], [[13934, 16641, 11521, 13343, 16869, 22659, 44858, 0], [0, 0, 0, 0, 0, 1477, 9140, 181968], [0, 0, 0, 0, 0, 6760, 2099, 283800], [0, 0, 0, 0, 4990, 0, 0, 166940], [0, 0, 0, 3665, 0, 0, 0, 77873], [0, 0, 1673, 0, 0, 0, 0, 31509], [0, 949, 0, 0, 0, 0, 0, 11470], [209, 0, 0, 0, 0, 0, 0, 6778]]], [[[4189, 4079, 556, 0, 0, 0, 0, 0], [0, 10021, 3587, 2730, 1661, 1393, 1156, 1201], [5227, 3498, 807, 0, 0, 0, 0, 0], [3059, 447, 2015, 0, 0, 0, 0, 0], [3312, 0, 0, 3055, 0, 0, 0, 0], [3143, 0, 0, 0, 2144, 0, 0, 0], [2667, 0, 0, 0, 0, 1139, 0, 0], [2494, 0, 0, 0, 0, 0, 353, 0]], [[4331, 15131, 10854, 2936, 0, 0, 0, 0], [15552, 0, 13195, 7901, 4262, 4697, 2869, 2483], [5795, 12234, 10887, 5449, 0, 0, 0, 0], [1861, 6718, 3791, 8123, 0, 0, 0, 0], [0, 5539, 0, 0, 6763, 0, 0, 0], [0, 5251, 0, 0, 0, 4974, 0, 0], [0, 3824, 0, 0, 0, 0, 2620, 0], [0, 2946, 0, 0, 0, 0, 0, 205]], [[1353, 4573, 8063, 5171, 2035, 0, 0, 0], [4908, 26040, 0, 8288, 3488, 2988, 2237, 1856], [2151, 8014, 7185, 8012, 4767, 0, 0, 0], [3428, 2987, 4267, 4665, 4907, 0, 0, 0], [0, 0, 2895, 0, 0, 3763, 0, 0], [0, 0, 2521, 0, 0, 0, 1278, 0], [0, 0, 1953, 0, 0, 0, 0, 377], [0, 0, 1774, 0, 0, 0, 0, 0]], [[0, 5385, 20285, 10881, 15157, 7451, 0, 0], [4237, 10450, 49850, 0, 7683, 7564, 4758, 4164], [0, 11363, 82709, 10460, 23630, 18644, 0, 0], [0, 17140, 17447, 7910, 19441, 18125, 0, 0], [5419, 0, 0, 5023, 0, 0, 22413, 0], [0, 0, 0, 3279, 0, 0, 0, 4791], [0, 0, 0, 2165, 0, 0, 0, 0], [0, 0, 0, 2057, 0, 0, 0, 0]], [[0, 0, 1953, 39699, 8921, 6109, 1247, 0], [2799, 5859, 5188, 208419, 0, 8231, 4691, 3658], [0, 0, 4293, 62829, 10445, 15797, 3719, 0], [0, 0, 8341, 5879, 6244, 4251, 7679, 0], [0, 6096, 0, 0, 3528, 0, 0, 3934], [3917, 0, 0, 0, 2406, 0, 0, 0], [0, 0, 0, 0, 1667, 0, 0, 0], [0, 0, 0, 0, 1440, 0, 0, 0]], [[0, 0, 0, 14180, 33539, 17014, 12727, 2791], [3033, 16339, 9705, 14417, 90066, 0, 17476, 7130], [0, 0, 0, 34231, 56662, 25967, 53965, 9966], [0, 0, 0, 22803, 36419, 11933, 26442, 20679], [0, 0, 14105, 0, 0, 7170, 0, 0], [0, 8574, 0, 0, 0, 5221, 0, 0], [2141, 0, 0, 0, 0, 3090, 0, 0], [0, 0, 0, 0, 0, 1513, 0, 0]], [[0, 0, 0, 0, 2566, 39897, 12614, 22432], [2828, 5844, 4789, 7331, 411084, 244233, 0, 11542], [0, 0, 0, 0, 7473, 173303, 22633, 43598], [0, 0, 0, 0, 55147, 5313, 13256, 4510], [0, 0, 0, 37960, 0, 0, 9959, 0], [0, 0, 17198, 0, 0, 0, 5257, 0], [0, 11094, 0, 0, 0, 0, 2277, 0], [972, 0, 0, 0, 0, 0, 908, 0]], [[0, 0, 0, 0, 0, 22464, 15523, 38427], [8732, 20687, 11824, 21808, 17730, 26078, 39860, 0], [0, 0, 0, 0, 0, 725293, 20555, 47714], [0, 0, 0, 0, 0, 7182, 282355, 33065], [0, 0, 0, 0, 5686, 0, 0, 20656], [0, 0, 0, 2867, 0, 0, 0, 12790], [0, 0, 1256, 0, 0, 0, 0, 5586], [0, 580, 0, 0, 0, 0, 0, 4403]]], [[[3368, 935, 2175, 0, 0, 0, 0, 0], [4715, 5176, 1176, 0, 0, 0, 0, 0], [0, 10192, 4087, 3078, 2340, 1966, 1926, 1272], [5937, 3862, 1294, 0, 0, 0, 0, 0], [3571, 956, 2353, 0, 0, 0, 0, 0], [3460, 0, 0, 4261, 0, 0, 0, 0], [2621, 0, 0, 0, 2142, 0, 0, 0], [2535, 0, 0, 0, 0, 1071, 0, 0]], [[2486, 9448, 1692, 3688, 0, 0, 0, 0], [3657, 15072, 6910, 3169, 0, 0, 0, 0], [13839, 0, 11804, 6382, 4399, 3548, 3271, 2377], [5571, 9774, 7186, 5233, 0, 0, 0, 0], [1809, 6401, 3898, 5781, 0, 0, 0, 0], [0, 5925, 0, 0, 4676, 0, 0, 0], [0, 4470, 0, 0, 0, 3200, 0, 0], [0, 3019, 0, 0, 0, 0, 607, 0]], [[3140, 3108, 7823, 2540, 4011, 0, 0, 0], [1521, 11639, 8674, 8609, 3391, 0, 0, 0], [6109, 26355, 0, 8718, 5674, 3859, 4162, 2582], [3187, 8364, 8486, 12070, 5941, 0, 0, 0], [4266, 4819, 5063, 5548, 6232, 0, 0, 0], [0, 0, 3955, 0, 0, 4632, 0, 0], [0, 0, 2821, 0, 0, 0, 1908, 0], [0, 0, 2398, 0, 0, 0, 0, 243]], [[0, 5146, 6920, 9333, 5525, 3874, 0, 0], [0, 8848, 25639, 12131, 8692, 11277, 0, 0], [5922, 10195, 42881, 0, 11511, 8943, 9063, 6016], [0, 7880, 24859, 13773, 15914, 10510, 0, 0], [0, 7550, 12362, 9000, 12366, 9160, 0, 0], [5170, 0, 0, 4906, 0, 0, 2705, 0], [0, 0, 0, 3204, 0, 0, 0, 674], [0, 0, 0, 2984, 0, 0, 0, 0]], [[0, 0, 5909, 16125, 10427, 4794, 14307, 0], [0, 0, 18458, 49583, 12598, 43597, 5030, 0], [5255, 8488, 9587, 115492, 0, 14554, 13990, 6866], [0, 0, 22699, 574547, 19092, 29885, 19584, 0], [0, 0, 26551, 25540, 12439, 28232, 26168, 0], [0, 14168, 0, 0, 4943, 0, 0, 7740], [3059, 0, 0, 0, 4307, 0, 0, 0], [0, 0, 0, 0, 4479, 0, 0, 0]], [[0, 0, 0, 13664, 104595, 6814, 8795, 5475], [0, 0, 0, 62569, 46496, 23498, 22911, 25155], [5034, 8285, 7867, 12469, 163632, 0, 22874, 8682], [0, 0, 0, 199693, 112561, 23011, 34830, 22805], [0, 0, 0, 25699, 129037, 10393, 77197, 13844], [0, 0, 10837, 0, 0, 5776, 0, 0], [0, 7384, 0, 0, 0, 3821, 0, 0], [1251, 0, 0, 0, 0, 1691, 0, 0]], [[0, 0, 0, 0, 28074, 4694, 12980, 1981], [0, 0, 0, 0, 8190, 65263, 49562, 37001], [7205, 13513, 14658, 27635, 713306, 282754, 0, 26519], [0, 0, 0, 0, 10222, 54098, 55793, 40899], [0, 0, 0, 0, 28502, 14327, 38979, 6499], [0, 0, 0, 13060, 0, 0, 14295, 0], [0, 0, 5235, 0, 0, 0, 5889, 0], [0, 2298, 0, 0, 0, 0, 2008, 0]], [[0, 0, 0, 0, 0, 44484, 2519, 25648], [0, 0, 0, 0, 0, 6236, 290731, 72528], [27319, 30193, 31167, 46946, 43796, 45851, 80747, 0], [0, 0, 0, 0, 0, 7795, 284682, 69790], [0, 0, 0, 0, 0, 212531, 7242, 33551], [0, 0, 0, 0, 110710, 0, 0, 19538], [0, 0, 0, 128406, 0, 0, 0, 9144], [0, 0, 10196, 0, 0, 0, 0, 6874]]], [[[3797, 0, 0, 1762, 0, 0, 0, 0], [3576, 1080, 2226, 0, 0, 0, 0, 0], [4947, 4459, 1599, 0, 0, 0, 0, 0], [0, 9128, 3882, 3807, 3736, 2677, 1826, 1390], [6285, 3336, 1359, 0, 0, 0, 0, 0], [3715, 933, 2282, 0, 0, 0, 0, 0], [2945, 0, 0, 2318, 0, 0, 0, 0], [2964, 0, 0, 0, 1695, 0, 0, 0]], [[0, 6216, 0, 0, 1752, 0, 0, 0], [765, 9382, 1965, 2863, 0, 0, 0, 0], [3888, 8965, 5435, 2914, 0, 0, 0, 0], [11586, 0, 8272, 5611, 3681, 2815, 2593, 1665], [4572, 7577, 4926, 3339, 0, 0, 0, 0], [1878, 5707, 2448, 3472, 0, 0, 0, 0], [0, 3862, 0, 0, 2735, 0, 0, 0], [0, 2750, 0, 0, 0, 1432, 0, 0]], [[0, 0, 3511, 0, 0, 1759, 0, 0], [2525, 5383, 5033, 3865, 3276, 0, 0, 0], [3915, 8605, 7955, 7966, 5985, 0, 0, 0], [6478, 24301, 0, 7536, 4408, 2716, 3155, 2170], [3523, 7365, 7412, 9377, 6524, 0, 0, 0], [3306, 4254, 3914, 6748, 4017, 0, 0, 0], [0, 0, 2668, 0, 0, 2806, 0, 0], [0, 0, 2309, 0, 0, 0, 512, 0]], [[2777, 0, 0, 4314, 0, 0, 2801, 0], [0, 9200, 8918, 6500, 8124, 9123, 0, 0], [0, 8909, 40440, 11696, 14600, 13098, 0, 0], [8919, 9638, 51631, 0, 10017, 5548, 5333, 3762], [0, 15426, 23571, 13846, 18718, 13405, 0, 0], [0, 8261, 17960, 6298, 12221, 8234, 0, 0], [2716, 0, 0, 3758, 0, 0, 4284, 0], [0, 0, 0, 3816, 0, 0, 0, 402]], [[0, 6510, 0, 0, 25030, 0, 0, 2167], [0, 0, 8909, 20804, 6534, 36890, 6706, 0], [0, 0, 38617, 121487, 17982, 22670, 12567, 0], [10636, 7692, 8200, 113262, 0, 25255, 11730, 13555], [0, 0, 21008, 110133, 18886, 24144, 17065, 0], [0, 0, 11259, 29076, 9201, 28484, 5091, 0], [0, 6747, 0, 0, 4091, 0, 0, 1115], [1289, 0, 0, 0, 6036, 0, 0, 0]], [[0, 0, 6575, 0, 0, 4021, 0, 0], [0, 0, 0, 19296, 7429, 10423, 3909, 11132], [0, 0, 0, 11332, 82238, 27749, 40685, 2913], [7546, 6651, 6011, 10420, 214155, 0, 22735, 10515], [0, 0, 0, 11489, 167031, 28215, 45504, 4192], [0, 0, 0, 22856, 17516, 12035, 5566, 12485], [0, 0, 9700, 0, 0, 6476, 0, 0], [0, 7827, 0, 0, 0, 2942, 0, 0]], [[0, 0, 0, 19342, 0, 0, 7689, 0], [0, 0, 0, 0, 35210, 93103, 16148, 14879], [0, 0, 0, 0, 124340, 176403, 49951, 37483], [9971, 8354, 8732, 11638, 385234, 604264, 0, 24827], [0, 0, 0, 0, 113042, 80496, 47459, 45665], [0, 0, 0, 0, 35580, 100270, 15854, 41973], [0, 0, 0, 25652, 0, 0, 6098, 0], [0, 0, 9356, 0, 0, 0, 2362, 0]], [[0, 0, 0, 0, 99749, 0, 0, 26193], [0, 0, 0, 0, 0, 140491, 3997, 38667], [0, 0, 0, 0, 0, 6970, 304187, 95896], [54748, 30731, 27893, 46578, 119468, 77880, 180974, 0], [0, 0, 0, 0, 0, 11356, 135860, 90052], [0, 0, 0, 0, 0, 79450, 7528, 33484], [0, 0, 0, 0, 26587, 0, 0, 16199], [0, 0, 0, 25964, 0, 0, 0, 11388]]], [[[3295, 0, 0, 0, 1375, 0, 0, 0], [3032, 0, 0, 2360, 0, 0, 0, 0], [3117, 972, 2583, 0, 0, 0, 0, 0], [5137, 3679, 1317, 0, 0, 0, 0, 0], [0, 7154, 3306, 4127, 3954, 1873, 1450, 1194], [5983, 3833, 1421, 0, 0, 0, 0, 0], [2580, 659, 2338, 0, 0, 0, 0, 0], [2784, 0, 0, 2195, 0, 0, 0, 0]], [[0, 4329, 0, 0, 0, 1152, 0, 0], [0, 5899, 0, 0, 2138, 0, 0, 0], [1764, 5334, 2854, 2987, 0, 0, 0, 0], [4016, 6253, 4429, 3739, 0, 0, 0, 0], [10567, 0, 6501, 4629, 3037, 2183, 1713, 1336], [3695, 6933, 4821, 3469, 0, 0, 0, 0], [555, 3859, 2142, 2480, 0, 0, 0, 0], [0, 2635, 0, 0, 1998, 0, 0, 0]], [[0, 0, 2208, 0, 0, 0, 1135, 0], [0, 0, 2537, 0, 0, 2777, 0, 0], [3152, 3243, 3709, 3966, 4021, 0, 0, 0], [3367, 6879, 6518, 8474, 4173, 0, 0, 0], [4675, 23454, 0, 7252, 3557, 1981, 1831, 1323], [3571, 9505, 6729, 8895, 4332, 0, 0, 0], [1901, 2854, 3367, 3273, 3320, 0, 0, 0], [0, 0, 2313, 0, 0, 1942, 0, 0]], [[0, 0, 0, 3535, 0, 0, 0, 1248], [3955, 0, 0, 3582, 0, 0, 3818, 0], [0, 7870, 24621, 5682, 20245, 8009, 0, 0], [0, 18048, 22303, 11962, 17353, 22104, 0, 0], [7064, 8162, 54878, 0, 9468, 4507, 3653, 2662], [0, 7054, 31077, 11760, 14307, 20613, 0, 0], [0, 7039, 8954, 5463, 13050, 8661, 0, 0], [1988, 0, 0, 4164, 0, 0, 1299, 0]], [[2611, 0, 0, 0, 4186, 0, 0, 0], [0, 9344, 0, 0, 3465, 0, 0, 3333], [0, 0, 11502, 43713, 9231, 24277, 9908, 0], [0, 0, 24725, 154646, 19107, 22277, 18414, 0], [7121, 6892, 6880, 136976, 0, 14207, 8110, 4746], [0, 0, 25280, 99836, 18251, 25998, 8548, 0], [0, 0, 7641, 20672, 9058, 25238, 9045, 0], [0, 5090, 0, 0, 6699, 0, 0, 795]], [[0, 9245, 0, 0, 0, 2742, 0, 0], [0, 0, 18868, 0, 0, 4877, 0, 0], [0, 0, 0, 38582, 14861, 9046, 7734, 13078], [0, 0, 0, 21110, 188687, 30665, 47754, 4383], [5194, 5494, 4521, 8108, 243601, 0, 22325, 6821], [0, 0, 0, 16013, 99789, 28226, 32324, 4452], [0, 0, 0, 23632, 11021, 10560, 4722, 3526], [0, 0, 9447, 0, 0, 4037, 0, 0]], [[0, 0, 10869, 0, 0, 0, 6225, 0], [0, 0, 0, 31292, 0, 0, 11662, 0], [0, 0, 0, 0, 65981, 45234, 24065, 12602], [0, 0, 0, 0, 41458, 125867, 59857, 74053], [6327, 6624, 6079, 9775, 378901, 617714, 0, 26843], [0, 0, 0, 0, 42884, 199151, 37952, 94182], [0, 0, 0, 0, 68151, 51520, 8593, 8104], [0, 0, 0, 29652, 0, 0, 2727, 0]], [[0, 0, 0, 3829, 0, 0, 0, 13809], [0, 0, 0, 0, 5664, 0, 0, 18121], [0, 0, 0, 0, 0, 12635, 19266, 108889], [0, 0, 0, 0, 0, 16076, 57971, 93681], [24776, 17970, 15661, 25001, 35368, 44464, 107549, 0], [0, 0, 0, 0, 0, 16785, 45334, 74951], [0, 0, 0, 0, 0, 10714, 10077, 774418], [0, 0, 0, 0, 6014, 0, 0, 8112]]], [[[2147, 0, 0, 0, 0, 777, 0, 0], [1969, 0, 0, 0, 1397, 0, 0, 0], [2066, 0, 0, 2300, 0, 0, 0, 0], [2159, 765, 1878, 0, 0, 0, 0, 0], [4333, 2740, 942, 0, 0, 0, 0, 0], [0, 5461, 2030, 2539, 1566, 1146, 703, 594], [4232, 2970, 927, 0, 0, 0, 0, 0], [1912, 507, 1501, 0, 0, 0, 0, 0]], [[0, 3038, 0, 0, 0, 0, 861, 0], [0, 4028, 0, 0, 0, 2216, 0, 0], [0, 3336, 0, 0, 3283, 0, 0, 0], [1679, 3473, 2546, 3864, 0, 0, 0, 0], [4329, 5381, 5133, 2883, 0, 0, 0, 0], [8676, 0, 6685, 3893, 2448, 1934, 1328, 1059], [2624, 6893, 5189, 2419, 0, 0, 0, 0], [858, 3387, 1996, 3086, 0, 0, 0, 0]], [[0, 0, 1781, 0, 0, 0, 0, 481], [0, 0, 1947, 0, 0, 0, 1125, 0], [0, 0, 2394, 0, 0, 2602, 0, 0], [3525, 2566, 2873, 3665, 3475, 0, 0, 0], [2197, 5780, 5883, 7359, 3426, 0, 0, 0], [2481, 17903, 0, 6025, 2923, 2221, 1644, 1129], [904, 7887, 6531, 6337, 2504, 0, 0, 0], [1553, 1924, 3642, 2370, 2217, 0, 0, 0]], [[0, 0, 0, 2361, 0, 0, 0, 0], [0, 0, 0, 2452, 0, 0, 0, 1357], [5361, 0, 0, 3249, 0, 0, 3916, 0], [0, 5415, 11007, 5351, 9405, 5344, 0, 0], [0, 8888, 19237, 11548, 14458, 11402, 0, 0], [3698, 5376, 44096, 0, 9058, 5792, 2994, 2270], [0, 4977, 23709, 10213, 10154, 7769, 0, 0], [0, 3510, 8226, 6421, 4670, 3756, 0, 0]], [[0, 0, 0, 0, 2368, 0, 0, 0], [4647, 0, 0, 0, 2178, 0, 0, 0], [0, 12707, 0, 0, 3541, 0, 0, 5858], [0, 0, 21400, 15938, 6854, 11274, 12813, 0], [0, 0, 11784, 90874, 18238, 36084, 10036, 0], [3028, 4157, 5573, 110702, 0, 13947, 5939, 3681], [0, 0, 5367, 46010, 14324, 39981, 3100, 0], [0, 0, 6320, 9442, 6647, 3859, 6775, 0]], [[2644, 0, 0, 0, 0, 1799, 0, 0], [0, 11814, 0, 0, 0, 4027, 0, 0], [0, 0, 14932, 0, 0, 5763, 0, 0], [0, 0, 0, 27772, 233669, 10101, 197048, 20859], [0, 0, 0, 186668, 101154, 35930, 63144, 57394], [3242, 4842, 8478, 11645, 130721, 0, 21075, 5767], [0, 0, 0, 81780, 72543, 37895, 38926, 13326], [0, 0, 0, 15813, 81694, 9202, 20282, 1807]], [[0, 1721, 0, 0, 0, 0, 2774, 0], [0, 0, 2432, 0, 0, 0, 4496, 0], [0, 0, 0, 4578, 0, 0, 7313, 0], [0, 0, 0, 0, 8000, 6482, 11683, 3887], [0, 0, 0, 0, 6814, 127339, 49415, 28164], [2947, 3488, 4042, 5656, 242306, 282790, 0, 23755], [0, 0, 0, 0, 5355, 68747, 30705, 22301], [0, 0, 0, 0, 6027, 3443, 3194, 1057]], [[0, 0, 5684, 0, 0, 0, 0, 19892], [0, 0, 0, 85068, 0, 0, 0, 32742], [0, 0, 0, 0, 109720, 0, 0, 102541], [0, 0, 0, 0, 0, 114477, 12340, 180177], [0, 0, 0, 0, 0, 18496, 545519, 283762], [10978, 9310, 10535, 15637, 24345, 36602, 79352, 0], [0, 0, 0, 0, 0, 15489, 318095, 54111], [0, 0, 0, 0, 0, 21219, 4426, 13475]]], [[[2161, 0, 0, 0, 0, 0, 481, 0], [1941, 0, 0, 0, 0, 791, 0, 0], [1832, 0, 0, 0, 1291, 0, 0, 0], [2061, 0, 0, 1831, 0, 0, 0, 0], [2212, 282, 1496, 0, 0, 0, 0, 0], [4250, 2635, 427, 0, 0, 0, 0, 0], [0, 4843, 1840, 1724, 1194, 714, 470, 496], [3780, 2795, 325, 0, 0, 0, 0, 0]], [[0, 2389, 0, 0, 0, 0, 0, 318], [0, 2725, 0, 0, 0, 0, 915, 0], [0, 2628, 0, 0, 0, 1980, 0, 0], [0, 2224, 0, 0, 2514, 0, 0, 0], [828, 2421, 1508, 2868, 0, 0, 0, 0], [3407, 5358, 4542, 2216, 0, 0, 0, 0], [7461, 0, 6006, 2771, 2045, 1468, 815, 791], [1838, 7526, 4180, 1380, 0, 0, 0, 0]], [[0, 0, 1455, 0, 0, 0, 0, 0], [0, 0, 1565, 0, 0, 0, 0, 518], [0, 0, 1751, 0, 0, 0, 1191, 0], [0, 0, 2055, 0, 0, 1796, 0, 0], [2796, 2435, 2834, 2589, 3420, 0, 0, 0], [2196, 6438, 5763, 6367, 3093, 0, 0, 0], [1987, 15216, 0, 5250, 2359, 1787, 940, 802], [632, 4156, 7659, 4943, 1341, 0, 0, 0]], [[0, 0, 0, 1461, 0, 0, 0, 0], [0, 0, 0, 1520, 0, 0, 0, 0], [0, 0, 0, 2189, 0, 0, 0, 4760], [5972, 0, 0, 2721, 0, 0, 14278, 0], [0, 14125, 18516, 4867, 20841, 22253, 0, 0], [0, 8451, 63847, 9381, 22209, 19120, 0, 0], [2233, 3725, 30528, 0, 7211, 4312, 1693, 1488], [0, 3525, 16174, 10187, 44481, 7969, 0, 0]], [[0, 0, 0, 0, 1639, 0, 0, 0], [0, 0, 0, 0, 1552, 0, 0, 0], [8458, 0, 0, 0, 2910, 0, 0, 0], [0, 8202, 0, 0, 3203, 0, 0, 7711], [0, 0, 15629, 6845, 7101, 7154, 12638, 0], [0, 0, 5239, 52987, 14571, 24973, 3740, 0], [1842, 3952, 5075, 88843, 0, 11255, 2691, 1712], [0, 0, 2912, 33870, 12172, 14139, 2207, 0]], [[0, 0, 0, 0, 0, 909, 0, 0], [2025, 0, 0, 0, 0, 1768, 0, 0], [0, 5433, 0, 0, 0, 2575, 0, 0], [0, 0, 7484, 0, 0, 3590, 0, 0], [0, 0, 0, 14152, 21528, 6733, 15142, 5193], [0, 0, 0, 22550, 85693, 27191, 25898, 9847], [1580, 3389, 4682, 6403, 145110, 0, 14943, 2641], [0, 0, 0, 11685, 44301, 16687, 12103, 1857]], [[1766, 0, 0, 0, 0, 0, 1007, 0], [0, 10983, 0, 0, 0, 0, 1346, 0], [0, 0, 15919, 0, 0, 0, 2303, 0], [0, 0, 0, 31308, 0, 0, 2952, 0], [0, 0, 0, 0, 42697, 6407, 4283, 4172], [0, 0, 0, 0, 6549, 184198, 36302, 71514], [1131, 1988, 2482, 2948, 117441, 509882, 0, 35781], [0, 0, 0, 0, 3628, 81314, 23424, 22160]], [[0, 306, 0, 0, 0, 0, 0, 3042], [0, 0, 386, 0, 0, 0, 0, 3880], [0, 0, 0, 743, 0, 0, 0, 6490], [0, 0, 0, 0, 1202, 0, 0, 8168], [0, 0, 0, 0, 0, 1570, 110231, 7516], [0, 0, 0, 0, 0, 887935, 113927, 128969], [2810, 5941, 5021, 7757, 8344, 12898, 175061, 0], [0, 0, 0, 0, 0, 17705, 104748, 162783]]], [[[2680, 0, 0, 0, 0, 0, 0, 159], [2349, 0, 0, 0, 0, 0, 276, 0], [2242, 0, 0, 0, 0, 565, 0, 0], [2524, 0, 0, 0, 1047, 0, 0, 0], [2814, 0, 0, 1464, 0, 0, 0, 0], [2415, 285, 1276, 0, 0, 0, 0, 0], [4390, 2185, 314, 0, 0, 0, 0, 0], [0, 6729, 2533, 2345, 1429, 898, 523, 582]], [[0, 2714, 0, 0, 0, 0, 0, 0], [0, 2969, 0, 0, 0, 0, 0, 393], [0, 2619, 0, 0, 0, 0, 1067, 0], [0, 2494, 0, 0, 0, 1945, 0, 0], [0, 2583, 0, 0, 3469, 0, 0, 0], [701, 3167, 1493, 3461, 0, 0, 0, 0], [3223, 5870, 4136, 1603, 0, 0, 0, 0], [11047, 0, 7522, 3930, 2418, 1473, 731, 1058]], [[0, 0, 1474, 0, 0, 0, 0, 0], [0, 0, 1550, 0, 0, 0, 0, 0], [0, 0, 1788, 0, 0, 0, 0, 1382], [0, 0, 1893, 0, 0, 0, 3161, 0], [0, 0, 2468, 0, 0, 5029, 0, 0], [3368, 2147, 3615, 3000, 5165, 0, 0, 0], [514, 10154, 6635, 9328, 2982, 0, 0, 0], [3414, 19819, 0, 6654, 4298, 2011, 878, 1148]], [[0, 0, 0, 1492, 0, 0, 0, 0], [0, 0, 0, 1651, 0, 0, 0, 0], [0, 0, 0, 2310, 0, 0, 0, 0], [0, 0, 0, 3386, 0, 0, 0, 4770], [4118, 0, 0, 5416, 0, 0, 9735, 0], [0, 6333, 4841, 6595, 5142, 11870, 0, 0], [0, 2166, 28968, 10614, 14720, 4600, 0, 0], [4047, 5623, 44845, 0, 9327, 4165, 1393, 1728]], [[0, 0, 0, 0, 1825, 0, 0, 0], [0, 0, 0, 0, 1360, 0, 0, 0], [0, 0, 0, 0, 2535, 0, 0, 0], [3023, 0, 0, 0, 3177, 0, 0, 0], [0, 6138, 0, 0, 4434, 0, 0, 2644], [0, 0, 9390, 29114, 6387, 21831, 6213, 0], [0, 0, 13190, 54510, 10888, 37301, 9720, 0], [2475, 3815, 4856, 110750, 0, 7270, 1577, 2325]], [[0, 0, 0, 0, 0, 548, 0, 0], [0, 0, 0, 0, 0, 957, 0, 0], [3679, 0, 0, 0, 0, 1306, 0, 0], [0, 4663, 0, 0, 0, 1944, 0, 0], [0, 0, 8992, 0, 0, 3013, 0, 0], [0, 0, 0, 10467, 10207, 5461, 9016, 7289], [0, 0, 0, 4768, 76203, 16070, 25652, 2409], [1663, 2805, 3140, 3780, 109184, 0, 8748, 2491]], [[0, 0, 0, 0, 0, 0, 525, 0], [348, 0, 0, 0, 0, 0, 724, 0], [0, 817, 0, 0, 0, 0, 1088, 0], [0, 0, 1296, 0, 0, 0, 1560, 0], [0, 0, 0, 2164, 0, 0, 1576, 0], [0, 0, 0, 0, 2451, 7360, 2312, 5541], [0, 0, 0, 0, 8845, 78748, 28002, 33284], [1182, 1654, 1609, 1781, 190787, 388513, 0, 18625]], [[121, 0, 0, 0, 0, 0, 0, 5853], [0, 331, 0, 0, 0, 0, 0, 8516], [0, 0, 460, 0, 0, 0, 0, 17084], [0, 0, 0, 887, 0, 0, 0, 31518], [0, 0, 0, 0, 1333, 0, 0, 30615], [0, 0, 0, 0, 0, 2178, 1249, 25980], [0, 0, 0, 0, 0, 997, 40131, 90519], [5672, 6344, 6141, 8913, 10980, 11987, 40025, 0]]]] ;
var total_moves = 38962022 ;

function drawChessLine(x1,y1,x2,y2) {
    var sx1 = offset+(x1+0.5)*scale;
    var sy1 = offset+(S-1-y1+0.5)*scale;
    var sx2 = offset+(x2+0.5)*scale;
    var sy2 = offset+(S-1-y2+0.5)*scale;
    ctx.moveTo(sx1,sy1);
    ctx.lineTo(sx2,sy2);
}

function drawChessLineRotatedBoard(x1,y1,x2,y2) {
    var sx1 = offset+(S-1-x1+0.5)*scale;
    var sy1 = offset+(y1+0.5)*scale;
    var sx2 = offset+(S-1-x2+0.5)*scale;
    var sy2 = offset+(y2+0.5)*scale;
    ctx.moveTo(sx1,sy1);
    ctx.lineTo(sx2,sy2);
}

function proportionToOpacity(p) {
    return Math.min(1,p*20);
}

var scale = 70;
var offset = 20;
var S = 8; // squares on a side of a chessboard
var ctx = document.getElementById("myCanvas").getContext("2d");

// draw board grid
ctx.strokeStyle = "rgba(0,0,0,0.3)";
ctx.beginPath();
ctx.rect(offset,offset,scale*S,scale*S);
for(var i = 1; i<S;i++ ){
    ctx.moveTo(offset+i*scale,offset);
    ctx.lineTo(offset+i*scale,offset+scale*S);
    ctx.moveTo(offset,offset+i*scale);
    ctx.lineTo(offset+scale*S,offset+i*scale);
}
ctx.stroke();

// draw moves
ctx.lineWidth = scale * 0.2;
for(var x1=0;x1<S;x1++) {
    for(var y1=0;y1<S;y1++) {
        for(var x2=0;x2<S;x2++) {
            for(var y2=0;y2<S;y2++) {
                var m = moves[x1][y1][x2][y2];
                if(m>0) {
                    var p = m / total_moves;
                    var opacity = proportionToOpacity(p);
                    ctx.strokeStyle = 'rgba(0,0,0,'+opacity+')';
                    ctx.beginPath();
                    drawChessLineRotatedBoard(x1,y1,x2,y2);
                    ctx.stroke();
                }
            }
        }
    }
}

// draw caption
ctx.font="10px Verdana";
ctx.fillStyle = "rgba(0,0,0,0.6)";
ctx.fillText("39 million moves for black from 1 million top-level games. https://github.com/timhutton/chessviz", offset, offset+S*scale+15);

</script>

</body>
</html>
