<html>
<body>

<!--    Copyright 2017 Tim Hutton <tim.hutton@gmail.com>

        This file is part of chessviz.

        chessviz is free software: you can redistribute it and/or modify
        it under the terms of the GNU General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        chessviz is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
        GNU General Public License for more details.

        You should have received a copy of the GNU General Public License
        along with chessviz. If not, see <http://www.gnu.org/licenses/>          -->

<canvas id="myCanvas" width="900" height="900" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>
// output from extract_moves.py
var moves = [[[[0, 27290, 23932, 24947, 14930, 15901, 16945, 18313], [109337, 5473, 1305, 0, 0, 0, 0, 0], [187535, 1773, 2524, 0, 0, 0, 0, 0], [227254, 0, 0, 1899, 0, 0, 0, 0], [102621, 0, 0, 0, 1245, 0, 0, 0], [38888, 0, 0, 0, 0, 827, 0, 0], [10187, 0, 0, 0, 0, 0, 400, 0], [6015, 0, 0, 0, 0, 0, 0, 113]], [[6892, 0, 275934, 308210, 3628, 3639, 3707, 2866], [10924, 8375, 62806, 5614, 0, 0, 0, 0], [3745, 5636, 5450, 5102, 0, 0, 0, 0], [0, 5288, 0, 0, 5231, 0, 0, 0], [0, 4460, 0, 0, 0, 2696, 0, 0], [0, 2425, 0, 0, 0, 0, 1322, 0], [0, 1205, 0, 0, 0, 0, 0, 275], [0, 693, 0, 0, 0, 0, 0, 0]], [[4294, 5425, 0, 72830, 5341, 5261, 5191, 3188], [4378, 11180, 12451, 64012, 13672, 0, 0, 0], [5587, 33224, 6403, 25442, 8498, 0, 0, 0], [0, 0, 4413, 0, 0, 6686, 0, 0], [0, 0, 3796, 0, 0, 0, 4433, 0], [0, 0, 2929, 0, 0, 0, 0, 3102], [0, 0, 2593, 0, 0, 0, 0, 0], [0, 0, 1466, 0, 0, 0, 0, 0]], [[4596, 4313, 8773, 0, 139921, 8297, 7268, 4233], [0, 7181, 75689, 11481, 80608, 20577, 0, 0], [0, 21431, 17740, 10546, 25044, 16134, 0, 0], [5716, 0, 0, 5088, 0, 0, 7961, 0], [0, 0, 0, 4268, 0, 0, 0, 2752], [0, 0, 0, 2819, 0, 0, 0, 0], [0, 0, 0, 2050, 0, 0, 0, 0], [0, 0, 0, 2324, 0, 0, 0, 0]], [[2748, 2441, 3745, 7476, 0, 56119, 9964, 6525], [0, 0, 6783, 8626, 9824, 24864, 6219, 0], [0, 0, 7150, 8676, 6469, 10509, 5303, 0], [0, 5216, 0, 0, 4340, 0, 0, 3868], [2488, 0, 0, 0, 3392, 0, 0, 0], [0, 0, 0, 0, 1919, 0, 0, 0], [0, 0, 0, 0, 1609, 0, 0, 0], [0, 0, 0, 0, 1408, 0, 0, 0]], [[2391, 2246, 3413, 5256, 10822, 0, 37216, 9026], [0, 0, 0, 3176, 10119, 10119, 9863, 1008], [0, 0, 0, 7276, 3285, 7987, 2367, 4378], [0, 0, 7002, 0, 0, 6036, 0, 0], [0, 4683, 0, 0, 0, 3653, 0, 0], [2324, 0, 0, 0, 0, 2628, 0, 0], [0, 0, 0, 0, 0, 1975, 0, 0], [0, 0, 0, 0, 0, 1662, 0, 0]], [[2285, 2073, 3037, 4575, 7258, 14860, 0, 19377], [0, 0, 0, 0, 3494, 6254, 12084, 5236], [0, 0, 0, 0, 4684, 2856, 8004, 1512], [0, 0, 0, 5845, 0, 0, 6277, 0], [0, 0, 5647, 0, 0, 0, 5403, 0], [0, 2083, 0, 0, 0, 0, 4852, 0], [552, 0, 0, 0, 0, 0, 3388, 0], [0, 0, 0, 0, 0, 0, 3194, 0]], [[1267, 1098, 1568, 2214, 3683, 5362, 11519, 0], [0, 0, 0, 0, 0, 1501, 2993, 5440], [0, 0, 0, 0, 0, 1939, 1134, 3656], [0, 0, 0, 0, 2456, 0, 0, 3940], [0, 0, 0, 2666, 0, 0, 0, 3919], [0, 0, 1766, 0, 0, 0, 0, 4228], [0, 567, 0, 0, 0, 0, 0, 3316], [165, 0, 0, 0, 0, 0, 0, 3043]]], [[[30473, 21323, 40172, 0, 0, 0, 0, 0], [0, 31763, 16305, 11131, 10437, 9386, 15173, 8224], [36989, 24128, 767599, 0, 0, 0, 0, 0], [23452, 206831, 9743, 0, 0, 0, 0, 0], [15852, 0, 0, 6735, 0, 0, 0, 0], [9297, 0, 0, 0, 2889, 0, 0, 0], [3615, 0, 0, 0, 0, 1701, 0, 0], [2802, 0, 0, 0, 0, 0, 739, 0]], [[8473, 7755, 33257, 2231, 0, 0, 0, 0], [8285, 0, 309673, 189727, 3448, 3236, 4042, 2545], [20495, 12970, 127105, 4892, 0, 0, 0, 0], [2237, 7790, 5678, 18140, 0, 0, 0, 0], [0, 5518, 0, 0, 13451, 0, 0, 0], [0, 3194, 0, 0, 0, 7894, 0, 0], [0, 1291, 0, 0, 0, 0, 4659, 0], [0, 698, 0, 0, 0, 0, 0, 403]], [[2715, 14443, 13888, 40065, 25823, 0, 0, 0], [3912, 8705, 0, 108116, 8739, 9545, 10771, 3787], [13928, 76215, 17923, 73239, 32816, 0, 0, 0], [14764, 32243, 9826, 46715, 33830, 0, 0, 0], [0, 0, 7675, 0, 0, 16448, 0, 0], [0, 0, 5284, 0, 0, 0, 7703, 0], [0, 0, 3725, 0, 0, 0, 0, 1177], [0, 0, 2017, 0, 0, 0, 0, 0]], [[0, 1138, 6418, 8587, 25491, 3152, 0, 0], [2476, 2839, 7982, 0, 103375, 7016, 7240, 3945], [0, 3852, 13266, 10448, 41295, 6907, 0, 0], [0, 7064, 7450, 6138, 9258, 7554, 0, 0], [3374, 0, 0, 3559, 0, 0, 4550, 0], [0, 0, 0, 2596, 0, 0, 0, 2997], [0, 0, 0, 1933, 0, 0, 0, 0], [0, 0, 0, 1734, 0, 0, 0, 0]], [[0, 0, 35769, 92936, 9743, 14757, 6582, 0], [2080, 2340, 4572, 7472, 0, 46469, 9200, 5137], [0, 0, 23203, 30256, 8329, 100377, 12029, 0], [0, 0, 20724, 20299, 5415, 22823, 35965, 0], [0, 15799, 0, 0, 3245, 0, 0, 4900], [10618, 0, 0, 0, 1956, 0, 0, 0], [0, 0, 0, 0, 1737, 0, 0, 0], [0, 0, 0, 0, 1443, 0, 0, 0]], [[0, 0, 0, 2736, 7677, 10041, 4832, 2824], [1557, 1763, 3094, 4576, 8642, 0, 30431, 5591], [0, 0, 0, 7677, 10643, 7780, 9506, 6358], [0, 0, 0, 9357, 8271, 5462, 6092, 6333], [0, 0, 8573, 0, 0, 3068, 0, 0], [0, 3289, 0, 0, 0, 2364, 0, 0], [878, 0, 0, 0, 0, 1763, 0, 0], [0, 0, 0, 0, 0, 1468, 0, 0]], [[0, 0, 0, 0, 2957, 9088, 12508, 3649], [1786, 2085, 3623, 4437, 6857, 12291, 0, 15898], [0, 0, 0, 0, 5095, 8399, 9706, 5714], [0, 0, 0, 0, 6080, 4106, 6604, 1804], [0, 0, 0, 5044, 0, 0, 5576, 0], [0, 0, 4288, 0, 0, 0, 5363, 0], [0, 1532, 0, 0, 0, 0, 3298, 0], [182, 0, 0, 0, 0, 0, 2969, 0]], [[0, 0, 0, 0, 0, 830, 3587, 3912], [1055, 1142, 1532, 2132, 2963, 3795, 9864, 0], [0, 0, 0, 0, 0, 1101, 3519, 4819], [0, 0, 0, 0, 0, 2318, 648, 3119], [0, 0, 0, 0, 3064, 0, 0, 3133], [0, 0, 0, 1771, 0, 0, 0, 3304], [0, 0, 1066, 0, 0, 0, 0, 2795], [0, 295, 0, 0, 0, 0, 0, 2674]]], [[[15841, 2576, 24642, 0, 0, 0, 0, 0], [120575, 114065, 7139, 0, 0, 0, 0, 0], [0, 60060, 30486, 21163, 21429, 19188, 23503, 26151], [57002, 148118, 12380, 0, 0, 0, 0, 0], [25355, 8730, 404645, 0, 0, 0, 0, 0], [13542, 0, 0, 116226, 0, 0, 0, 0], [5733, 0, 0, 0, 257993, 0, 0, 0], [4224, 0, 0, 0, 0, 19582, 0, 0]], [[1326, 5984, 4974, 15868, 0, 0, 0, 0], [21250, 19830, 69635, 11438, 0, 0, 0, 0], [14699, 0, 421489, 355270, 9161, 7600, 8136, 6776], [23932, 37549, 74052, 12218, 0, 0, 0, 0], [5513, 24009, 27281, 27966, 0, 0, 0, 0], [0, 10359, 0, 0, 11801, 0, 0, 0], [0, 3772, 0, 0, 0, 5923, 0, 0], [0, 1573, 0, 0, 0, 0, 2761, 0]], [[2234, 14225, 5758, 79059, 9235, 0, 0, 0], [14415, 12636, 17347, 49469, 59913, 0, 0, 0], [4788, 13269, 0, 133198, 8454, 6912, 8019, 6476], [40647, 24469, 21561, 143920, 245873, 0, 0, 0], [8021, 117846, 11582, 139897, 12640, 0, 0, 0], [0, 0, 6585, 0, 0, 7336, 0, 0], [0, 0, 5523, 0, 0, 0, 4650, 0], [0, 0, 2679, 0, 0, 0, 0, 849]], [[0, 11486, 4438, 6844, 13502, 9092, 0, 0], [0, 3349, 109424, 12289, 65559, 16310, 0, 0], [3148, 6854, 10013, 0, 118789, 8528, 7891, 6137], [0, 11806, 56410, 13728, 138369, 22759, 0, 0], [0, 29920, 34524, 6894, 25379, 21944, 0, 0], [8871, 0, 0, 3749, 0, 0, 12266, 0], [0, 0, 0, 2979, 0, 0, 0, 1918], [0, 0, 0, 2890, 0, 0, 0, 0]], [[0, 0, 4298, 3946, 7464, 7025, 4446, 0], [0, 0, 6198, 8509, 9412, 20647, 7726, 0], [2521, 3462, 4896, 7987, 0, 46306, 8618, 6032], [0, 0, 12789, 14735, 9553, 25123, 8627, 0], [0, 0, 9278, 11085, 5569, 10541, 8024, 0], [0, 3743, 0, 0, 2534, 0, 0, 6490], [907, 0, 0, 0, 2221, 0, 0, 0], [0, 0, 0, 0, 1881, 0, 0, 0]], [[0, 0, 0, 3420, 3551, 9132, 3156, 3016], [0, 0, 0, 5004, 7838, 8342, 9200, 2416], [1763, 2821, 3066, 4584, 8457, 0, 28648, 6538], [0, 0, 0, 6567, 10082, 8922, 8545, 4113], [0, 0, 0, 5142, 7189, 4120, 7752, 3788], [0, 0, 4209, 0, 0, 2697, 0, 0], [0, 1376, 0, 0, 0, 1960, 0, 0], [198, 0, 0, 0, 0, 1564, 0, 0]], [[0, 0, 0, 0, 3523, 2623, 8666, 4490], [0, 0, 0, 0, 3484, 6473, 11838, 3727], [1694, 2549, 3043, 3814, 5707, 10777, 0, 14341], [0, 0, 0, 0, 6119, 7657, 8923, 5341], [0, 0, 0, 0, 5120, 4446, 5828, 2208], [0, 0, 0, 3534, 0, 0, 5473, 0], [0, 0, 2739, 0, 0, 0, 3381, 0], [0, 428, 0, 0, 0, 0, 2659, 0]], [[0, 0, 0, 0, 0, 2452, 892, 3321], [0, 0, 0, 0, 0, 1533, 4300, 4411], [1191, 1905, 2086, 2620, 3077, 3946, 9451, 0], [0, 0, 0, 0, 0, 1919, 3665, 5486], [0, 0, 0, 0, 0, 2300, 1265, 3343], [0, 0, 0, 0, 3305, 0, 0, 3645], [0, 0, 0, 1723, 0, 0, 0, 2685], [0, 0, 828, 0, 0, 0, 0, 2677]]], [[[25601, 0, 0, 31012, 0, 0, 0, 0], [28610, 3819, 68658, 0, 0, 0, 0, 0], [81545, 108358, 8038, 0, 0, 0, 0, 0], [0, 314611, 122783, 123723, 61093, 50037, 35928, 59252], [124103, 217310, 21048, 0, 0, 0, 0, 0], [40240, 13199, 113180, 0, 0, 0, 0, 0], [20673, 0, 0, 33981, 0, 0, 0, 0], [14478, 0, 0, 0, 34955, 0, 0, 0]], [[0, 6403, 0, 0, 18148, 0, 0, 0], [8530, 12440, 50234, 30601, 0, 0, 0, 0], [29304, 43479, 81459, 76046, 0, 0, 0, 0], [23130, 0, 242020, 841027, 21712, 18751, 10768, 12530], [37626, 64024, 86408, 60006, 0, 0, 0, 0], [61846, 36637, 62418, 39046, 0, 0, 0, 0], [0, 11391, 0, 0, 28649, 0, 0, 0], [0, 6251, 0, 0, 0, 20634, 0, 0]], [[0, 0, 5801, 0, 0, 15293, 0, 0], [19942, 4098, 13142, 10158, 29582, 0, 0, 0], [3534, 50568, 34277, 100883, 14732, 0, 0, 0], [10788, 31205, 0, 109566, 16454, 11683, 8726, 8798], [4753, 61953, 41287, 111724, 14612, 0, 0, 0], [20358, 7218, 20928, 13576, 26652, 0, 0, 0], [0, 0, 17579, 0, 0, 13950, 0, 0], [0, 0, 9598, 0, 0, 0, 9944, 0]], [[1569, 0, 0, 8189, 0, 0, 7505, 0], [0, 5521, 117180, 11063, 67167, 14204, 0, 0], [0, 14733, 23699, 21039, 91067, 107346, 0, 0], [8341, 26032, 27768, 0, 135394, 11796, 7651, 9006], [0, 38311, 44947, 20383, 127730, 29693, 0, 0], [0, 10737, 58265, 9752, 46111, 17049, 0, 0], [2597, 0, 0, 6020, 0, 0, 15926, 0], [0, 0, 0, 7358, 0, 0, 0, 1536]], [[0, 1832, 0, 0, 6113, 0, 0, 4164], [0, 0, 10039, 9212, 8096, 11647, 10769, 0], [0, 0, 10378, 13143, 13367, 40178, 11835, 0], [5276, 9013, 10111, 9931, 0, 58774, 9571, 7881], [0, 0, 22294, 16757, 13182, 36349, 26665, 0], [0, 0, 7712, 14761, 5621, 27505, 8433, 0], [0, 2777, 0, 0, 3196, 0, 0, 2066], [317, 0, 0, 0, 3327, 0, 0, 0]], [[0, 0, 2775, 0, 0, 7788, 0, 0], [0, 0, 0, 4377, 4832, 8478, 7048, 3116], [0, 0, 0, 8219, 10440, 11252, 9848, 5806], [4332, 6585, 5347, 6779, 9710, 0, 32761, 10673], [0, 0, 0, 8770, 11786, 10241, 11573, 4595], [0, 0, 0, 4504, 7740, 5852, 6456, 4695], [0, 0, 3802, 0, 0, 3096, 0, 0], [0, 567, 0, 0, 0, 2500, 0, 0]], [[0, 0, 0, 1594, 0, 0, 7735, 0], [0, 0, 0, 0, 2593, 2291, 10439, 1124], [0, 0, 0, 0, 3671, 4994, 9399, 4047], [2029, 3157, 3425, 3729, 5184, 9843, 0, 13267], [0, 0, 0, 0, 3640, 5140, 8538, 4201], [0, 0, 0, 0, 2842, 3373, 6974, 2567], [0, 0, 0, 2177, 0, 0, 3671, 0], [0, 0, 1261, 0, 0, 0, 2942, 0]], [[0, 0, 0, 0, 2049, 0, 0, 4179], [0, 0, 0, 0, 0, 2601, 1171, 3702], [0, 0, 0, 0, 0, 1723, 4149, 5455], [1527, 2228, 2974, 3578, 3581, 4399, 9067, 0], [0, 0, 0, 0, 0, 1642, 3758, 6454], [0, 0, 0, 0, 0, 3153, 1171, 4474], [0, 0, 0, 0, 2414, 0, 0, 3055], [0, 0, 0, 1708, 0, 0, 0, 3226]]], [[[17963, 0, 0, 0, 3697, 0, 0, 0], [18313, 0, 0, 5520, 0, 0, 0, 0], [192954, 8838, 9960, 0, 0, 0, 0, 0], [93935, 40466, 14743, 0, 0, 0, 0, 0], [0, 96518, 65578, 46587, 41681, 23119, 22381, 25600], [58967, 35328, 9946, 0, 0, 0, 0, 0], [782011, 4905, 22314, 0, 0, 0, 0, 0], [9820, 0, 0, 12709, 0, 0, 0, 0]], [[0, 5605, 0, 0, 0, 13844, 0, 0], [0, 9899, 0, 0, 25076, 0, 0, 0], [15020, 24752, 32966, 56659, 0, 0, 0, 0], [39219, 71116, 113486, 56214, 0, 0, 0, 0], [25656, 0, 211257, 876490, 18201, 9915, 8201, 6588], [41388, 52196, 148469, 46067, 0, 0, 0, 0], [7545, 11412, 58250, 42154, 0, 0, 0, 0], [0, 4206, 0, 0, 28976, 0, 0, 0]], [[0, 0, 4494, 0, 0, 0, 15768, 0], [0, 0, 8146, 0, 0, 41368, 0, 0], [26551, 10731, 14694, 22652, 56349, 0, 0, 0], [6171, 66259, 44099, 178543, 35793, 0, 0, 0], [10176, 30865, 0, 103884, 12540, 6678, 6743, 5355], [5990, 55595, 38478, 87523, 24728, 0, 0, 0], [9648, 5913, 20877, 19771, 53363, 0, 0, 0], [0, 0, 9772, 0, 0, 37273, 0, 0]], [[0, 0, 0, 4063, 0, 0, 0, 3688], [3446, 0, 0, 5157, 0, 0, 11652, 0], [0, 11323, 16581, 9169, 27016, 12278, 0, 0], [0, 12043, 26649, 20229, 281207, 30045, 0, 0], [6685, 14114, 18166, 0, 288234, 7024, 6056, 5657], [0, 7533, 25848, 19023, 99931, 32980, 0, 0], [0, 6495, 19351, 10019, 22230, 6869, 0, 0], [642, 0, 0, 9718, 0, 0, 5166, 0]], [[668, 0, 0, 0, 4132, 0, 0, 0], [0, 2993, 0, 0, 3601, 0, 0, 3917], [0, 0, 6890, 22433, 6856, 23127, 6579, 0], [0, 0, 17839, 15352, 12416, 57536, 21893, 0], [7645, 6715, 7358, 9732, 0, 55792, 7903, 6254], [0, 0, 16424, 12366, 10426, 70320, 8589, 0], [0, 0, 8995, 13272, 6044, 11810, 6863, 0], [0, 1154, 0, 0, 4720, 0, 0, 1933]], [[0, 590, 0, 0, 0, 3622, 0, 0], [0, 0, 2842, 0, 0, 3116, 0, 0], [0, 0, 0, 3356, 4280, 4260, 3944, 3619], [0, 0, 0, 4373, 8823, 8580, 8704, 3281], [1899, 3007, 2803, 4038, 7748, 0, 22265, 5413], [0, 0, 0, 4383, 8683, 7795, 14634, 4629], [0, 0, 0, 3445, 4297, 4437, 4231, 1809], [0, 0, 2351, 0, 0, 2733, 0, 0]], [[0, 0, 1410, 0, 0, 0, 5106, 0], [0, 0, 0, 2313, 0, 0, 5893, 0], [0, 0, 0, 0, 3412, 3837, 5608, 2879], [0, 0, 0, 0, 4728, 6393, 6787, 4977], [1675, 2219, 2650, 2888, 4523, 7623, 0, 10509], [0, 0, 0, 0, 4048, 5815, 8087, 4744], [0, 0, 0, 0, 2960, 2771, 3795, 791], [0, 0, 0, 2330, 0, 0, 2923, 0]], [[0, 0, 0, 1189, 0, 0, 0, 3262], [0, 0, 0, 0, 2127, 0, 0, 2820], [0, 0, 0, 0, 0, 2327, 1168, 2818], [0, 0, 0, 0, 0, 1799, 3160, 5314], [1125, 1542, 1873, 3018, 3417, 3338, 6988, 0], [0, 0, 0, 0, 0, 2028, 3805, 5992], [0, 0, 0, 0, 0, 2090, 853, 2572], [0, 0, 0, 0, 1891, 0, 0, 2827]]], [[[18857, 0, 0, 0, 0, 7014, 0, 0], [24535, 0, 0, 0, 234949, 0, 0, 0], [58589, 0, 0, 204288, 0, 0, 0, 0], [186917, 9907, 217009, 0, 0, 0, 0, 0], [329812, 281377, 30777, 0, 0, 0, 0, 0], [0, 80008, 51148, 28729, 19097, 16560, 13741, 11737], [40380, 185856, 31766, 0, 0, 0, 0, 0], [10235, 4913, 16660, 0, 0, 0, 0, 0]], [[0, 2576, 0, 0, 0, 0, 3418, 0], [0, 4374, 0, 0, 0, 6647, 0, 0], [0, 8780, 0, 0, 10071, 0, 0, 0], [3704, 21350, 8744, 17238, 0, 0, 0, 0], [26792, 55039, 107896, 7201, 0, 0, 0, 0], [22318, 0, 315390, 398223, 6214, 5613, 4725, 2871], [18384, 27962, 60649, 7043, 0, 0, 0, 0], [1075, 4117, 3893, 14843, 0, 0, 0, 0]], [[0, 0, 3506, 0, 0, 0, 0, 4021], [0, 0, 6303, 0, 0, 0, 13597, 0], [0, 0, 9819, 0, 0, 14190, 0, 0], [16046, 88703, 18814, 508154, 23796, 0, 0, 0], [31855, 58802, 46674, 90120, 186055, 0, 0, 0], [7182, 26168, 0, 137152, 12503, 11277, 7186, 3284], [5998, 32630, 53470, 58469, 86393, 0, 0, 0], [1651, 27631, 23508, 60080, 18160, 0, 0, 0]], [[0, 0, 0, 2498, 0, 0, 0, 0], [0, 0, 0, 3207, 0, 0, 0, 4618], [7472, 0, 0, 4090, 0, 0, 11305, 0], [0, 19417, 13791, 8017, 16055, 27316, 0, 0], [0, 7457, 48660, 18513, 141981, 11293, 0, 0], [4338, 7470, 15436, 0, 183581, 7796, 5102, 2674], [0, 2644, 40315, 15126, 59542, 6601, 0, 0], [0, 5474, 3363, 9076, 9694, 12475, 0, 0]], [[0, 0, 0, 0, 2004, 0, 0, 0], [1110, 0, 0, 0, 1809, 0, 0, 0], [0, 2835, 0, 0, 2640, 0, 0, 4913], [0, 0, 5512, 8363, 4514, 12306, 5099, 0], [0, 0, 14410, 11742, 9907, 39973, 12551, 0], [2622, 3708, 5788, 7719, 0, 56029, 5008, 2793], [0, 0, 7295, 8263, 9657, 34687, 6665, 0], [0, 0, 3428, 4080, 6114, 10020, 3329, 0]], [[319, 0, 0, 0, 0, 2320, 0, 0], [0, 832, 0, 0, 0, 2150, 0, 0], [0, 0, 2409, 0, 0, 2430, 0, 0], [0, 0, 0, 3838, 4780, 4258, 3893, 4084], [0, 0, 0, 4528, 7791, 7383, 9037, 3386], [1582, 2386, 3068, 3786, 5801, 0, 19096, 2660], [0, 0, 0, 3358, 7066, 7351, 14182, 1484], [0, 0, 0, 2717, 3612, 4290, 3051, 2324]], [[0, 492, 0, 0, 0, 0, 3512, 0], [0, 0, 2194, 0, 0, 0, 4012, 0], [0, 0, 0, 2640, 0, 0, 3392, 0], [0, 0, 0, 0, 4308, 3422, 3868, 1944], [0, 0, 0, 0, 3686, 6451, 6463, 4170], [1304, 1630, 2209, 2600, 3345, 7576, 0, 9448], [0, 0, 0, 0, 3324, 5464, 8026, 2777], [0, 0, 0, 0, 3053, 2717, 3972, 1706]], [[0, 0, 624, 0, 0, 0, 0, 2255], [0, 0, 0, 1140, 0, 0, 0, 1951], [0, 0, 0, 0, 2081, 0, 0, 1994], [0, 0, 0, 0, 0, 2001, 842, 2123], [0, 0, 0, 0, 0, 1137, 2920, 4389], [641, 810, 1022, 1263, 2006, 1944, 5649, 0], [0, 0, 0, 0, 0, 1043, 2675, 4505], [0, 0, 0, 0, 0, 1472, 633, 1957]]], [[[2676, 0, 0, 0, 0, 0, 611, 0], [2678, 0, 0, 0, 0, 1259, 0, 0], [4663, 0, 0, 0, 1573, 0, 0, 0], [8878, 0, 0, 3274, 0, 0, 0, 0], [8628, 61131, 3152, 0, 0, 0, 0, 0], [114283, 122100, 942576, 0, 0, 0, 0, 0], [0, 125864, 11062, 7441, 6717, 5098, 5939, 2944], [206197, 105408, 7546, 0, 0, 0, 0, 0]], [[0, 877, 0, 0, 0, 0, 0, 1887], [0, 1161, 0, 0, 0, 0, 8101, 0], [0, 2263, 0, 0, 0, 9395, 0, 0], [0, 4221, 0, 0, 18465, 0, 0, 0], [2432, 5219, 5653, 25952, 0, 0, 0, 0], [49526, 31286, 124694, 4536, 0, 0, 0, 0], [23032, 0, 377177, 220946, 3020, 2611, 2086, 1230], [12090, 18837, 57873, 2144, 0, 0, 0, 0]], [[0, 0, 1835, 0, 0, 0, 0, 0], [0, 0, 3098, 0, 0, 0, 0, 2366], [0, 0, 5228, 0, 0, 0, 5334, 0], [0, 0, 8400, 0, 0, 9857, 0, 0], [8056, 18260, 13508, 23056, 18731, 0, 0, 0], [11835, 35991, 34993, 70464, 25968, 0, 0, 0], [2404, 15931, 0, 134600, 10439, 7009, 5974, 2266], [1967, 13146, 24810, 44631, 17857, 0, 0, 0]], [[0, 0, 0, 1721, 0, 0, 0, 0], [0, 0, 0, 2403, 0, 0, 0, 0], [0, 0, 0, 3077, 0, 0, 0, 4489], [7195, 0, 0, 4162, 0, 0, 5835, 0], [0, 13235, 10961, 7245, 7954, 10432, 0, 0], [0, 4544, 22930, 15682, 53059, 9575, 0, 0], [1646, 2755, 15962, 0, 154229, 5744, 4815, 1972], [0, 2630, 11169, 15987, 36395, 5866, 0, 0]], [[0, 0, 0, 0, 1580, 0, 0, 0], [0, 0, 0, 0, 1433, 0, 0, 0], [6036, 0, 0, 0, 2285, 0, 0, 0], [0, 20326, 0, 0, 2338, 0, 0, 6799], [0, 0, 42829, 20573, 5159, 18053, 32900, 0], [0, 0, 23425, 37547, 8747, 141574, 11214, 0], [1355, 1824, 6110, 7322, 0, 42929, 4222, 2415], [0, 0, 7449, 69354, 11113, 30663, 5196, 0]], [[0, 0, 0, 0, 0, 1654, 0, 0], [490, 0, 0, 0, 0, 1383, 0, 0], [0, 1339, 0, 0, 0, 1521, 0, 0], [0, 0, 2558, 0, 0, 2212, 0, 0], [0, 0, 0, 3386, 2770, 3854, 2806, 2977], [0, 0, 0, 2872, 6235, 6614, 11666, 2401], [781, 1037, 2204, 2560, 5163, 0, 15656, 2234], [0, 0, 0, 1378, 5463, 8690, 6739, 710]], [[172, 0, 0, 0, 0, 0, 2295, 0], [0, 509, 0, 0, 0, 0, 2359, 0], [0, 0, 1426, 0, 0, 0, 2100, 0], [0, 0, 0, 2288, 0, 0, 2088, 0], [0, 0, 0, 0, 2837, 1941, 2525, 927], [0, 0, 0, 0, 2790, 5169, 6066, 3544], [811, 979, 1848, 2005, 2821, 6053, 0, 7787], [0, 0, 0, 0, 1752, 4347, 7755, 2352]], [[0, 228, 0, 0, 0, 0, 0, 2128], [0, 0, 533, 0, 0, 0, 0, 1965], [0, 0, 0, 908, 0, 0, 0, 1821], [0, 0, 0, 0, 1333, 0, 0, 1998], [0, 0, 0, 0, 0, 1458, 405, 2034], [0, 0, 0, 0, 0, 716, 2582, 4712], [522, 541, 845, 1168, 1901, 1900, 4664, 0], [0, 0, 0, 0, 0, 535, 2614, 3839]]], [[[4544, 0, 0, 0, 0, 0, 0, 110], [5264, 0, 0, 0, 0, 0, 263, 0], [11090, 0, 0, 0, 0, 261, 0, 0], [34786, 0, 0, 0, 464, 0, 0, 0], [51199, 0, 0, 717, 0, 0, 0, 0], [29898, 1505, 1279, 0, 0, 0, 0, 0], [91929, 39594, 891, 0, 0, 0, 0, 0], [0, 48598, 12181, 7700, 7404, 5629, 6729, 5315]], [[0, 530, 0, 0, 0, 0, 0, 0], [0, 641, 0, 0, 0, 0, 0, 327], [0, 1352, 0, 0, 0, 0, 665, 0], [0, 2920, 0, 0, 0, 1309, 0, 0], [0, 2563, 0, 0, 2283, 0, 0, 0], [6030, 2742, 10265, 2494, 0, 0, 0, 0], [31244, 25593, 67238, 14054, 0, 0, 0, 0], [18306, 0, 396335, 220412, 2013, 1924, 2721, 1546]], [[0, 0, 1158, 0, 0, 0, 0, 0], [0, 0, 2132, 0, 0, 0, 0, 0], [0, 0, 3270, 0, 0, 0, 0, 3154], [0, 0, 5528, 0, 0, 0, 4280, 0], [0, 0, 7222, 0, 0, 9190, 0, 0], [5857, 5676, 9463, 5897, 7470, 0, 0, 0], [1905, 20973, 21928, 63983, 4456, 0, 0, 0], [2148, 8621, 0, 116774, 6119, 6230, 4945, 2456]], [[0, 0, 0, 1657, 0, 0, 0, 0], [0, 0, 0, 2095, 0, 0, 0, 0], [0, 0, 0, 2832, 0, 0, 0, 0], [0, 0, 0, 4094, 0, 0, 0, 3834], [4843, 0, 0, 5235, 0, 0, 11866, 0], [0, 13407, 15539, 7295, 21347, 15237, 0, 0], [0, 5632, 47588, 12097, 61350, 12810, 0, 0], [1643, 1402, 8727, 0, 141209, 7803, 5836, 3098]], [[0, 0, 0, 0, 1682, 0, 0, 0], [0, 0, 0, 0, 1501, 0, 0, 0], [0, 0, 0, 0, 2504, 0, 0, 0], [4285, 0, 0, 0, 3116, 0, 0, 0], [0, 11005, 0, 0, 5243, 0, 0, 3625], [0, 0, 12675, 5510, 6602, 8224, 7313, 0], [0, 0, 5323, 14097, 12402, 44512, 3484, 0], [1455, 1251, 6432, 11441, 0, 53448, 7134, 4433]], [[0, 0, 0, 0, 0, 1550, 0, 0], [0, 0, 0, 0, 0, 1366, 0, 0], [2367, 0, 0, 0, 0, 1395, 0, 0], [0, 6850, 0, 0, 0, 2091, 0, 0], [0, 0, 10950, 0, 0, 3000, 0, 0], [0, 0, 0, 8924, 3598, 4475, 3281, 7468], [0, 0, 0, 3750, 17460, 7993, 29999, 765], [1087, 984, 3423, 6135, 7532, 0, 23137, 4025]], [[0, 0, 0, 0, 0, 0, 2697, 0], [382, 0, 0, 0, 0, 0, 2851, 0], [0, 1049, 0, 0, 0, 0, 2342, 0], [0, 0, 2337, 0, 0, 0, 2365, 0], [0, 0, 0, 3439, 0, 0, 2756, 0], [0, 0, 0, 0, 3229, 2458, 3926, 1071], [0, 0, 0, 0, 2254, 5194, 6951, 3699], [1005, 1023, 2025, 3164, 4025, 8086, 0, 12893]], [[115, 0, 0, 0, 0, 0, 0, 2763], [0, 180, 0, 0, 0, 0, 0, 2442], [0, 0, 495, 0, 0, 0, 0, 2378], [0, 0, 0, 1001, 0, 0, 0, 2835], [0, 0, 0, 0, 1501, 0, 0, 3002], [0, 0, 0, 0, 0, 1806, 529, 2698], [0, 0, 0, 0, 0, 563, 2563, 4641], [570, 538, 1078, 1979, 2606, 2590, 7304, 0]]]] ;
var total_moves = 39434961 ;

function drawChessLine(x1,y1,x2,y2) {
    var sx1 = offset+(x1+0.5)*scale;
    var sy1 = offset+(S-1-y1+0.5)*scale;
    var sx2 = offset+(x2+0.5)*scale;
    var sy2 = offset+(S-1-y2+0.5)*scale;
    ctx.moveTo(sx1,sy1);
    ctx.lineTo(sx2,sy2);
}

function proportionToOpacity(p) {
    return Math.min(1,p*20);
}

var scale = 70;
var offset = 20;
var S = 8; // squares on a side of a chessboard
var ctx = document.getElementById("myCanvas").getContext("2d");

// draw board grid
ctx.strokeStyle = "rgba(0,0,0,0.3)";
ctx.beginPath();
ctx.rect(offset,offset,scale*S,scale*S);
for(var i = 1; i<S;i++ ){
    ctx.moveTo(offset+i*scale,offset);
    ctx.lineTo(offset+i*scale,offset+scale*S);
    ctx.moveTo(offset,offset+i*scale);
    ctx.lineTo(offset+scale*S,offset+i*scale);
}
ctx.stroke();

// draw moves
ctx.lineWidth = scale * 0.2;
for(var x1=0;x1<S;x1++) {
    for(var y1=0;y1<S;y1++) {
        for(var x2=0;x2<S;x2++) {
            for(var y2=0;y2<S;y2++) {
                var m = moves[x1][y1][x2][y2];
                if(m>0) {
                    var p = m / total_moves;
                    var opacity = proportionToOpacity(p);
                    ctx.strokeStyle = 'rgba(0,0,0,'+opacity+')';
                    ctx.beginPath();
                    drawChessLine(x1,y1,x2,y2);
                    ctx.stroke();
                }
            }
        }
    }
}

// draw caption
ctx.font="10px Verdana";
ctx.fillStyle = "rgba(0,0,0,0.6)";
ctx.fillText("39 million moves for white from 1 million top-level games. https://github.com/timhutton/chessviz", offset, offset+S*scale+15);

</script>

</body>
</html>
